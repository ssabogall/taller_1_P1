{% extends "base.html" %}

{% block title %}Inicio{% endblock %}

{% block content %}

<form action="" method="get" class="mb-3">
  <label for="searchMovie" class="form-label">Search for Movie:</label>
  <input type="text" class="form-control" name="searchMovie" id="searchMovie">
  <button type="submit" class="btn btn-primary mt-2">Search</button>
</form>

<p>Searching for {{ searchTerm|default:"None" }}</p>

{# Grid flexible: 1 col en xs, 2 en sm, 3 en md, 4 en xl; ajusta si quieres #}
<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 g-4">
  {% for movie in movies %}
    <div class="col">
      <div class="card h-100 shadow-sm">
        {# Imagen superior con tama√±o uniforme (cuadrado) #}
        <div class="ratio ratio-1x1">
          <img
            src="{% if movie.image %}{{ movie.image.url }}{% else %}/media/movie/images/default.jpg{% endif %}"
            alt="{{ movie.title }}"
            class="w-100 h-100 object-fit-cover rounded-top"
            loading="lazy"
            onerror="this.onerror=null;this.src='/media/movie/images/default.jpg';"
          >
        </div>

        <div class="card-body">
          <h6 class="card-title fw-bold mb-1">{{ movie.title }}</h6>
          {% if movie.description %}
            <p class="card-text mb-0">{{ movie.description }}</p>
          {% endif %}
          {% if movie.url %}
            <div class="mt-2">
              <a href="{{ movie.url }}" class="btn btn-primary btn-sm" target="_blank" rel="noopener">Movie Link</a>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  {% empty %}
    <p>No movies found.</p>
  {% endfor %}
</div>

{% endblock %}
